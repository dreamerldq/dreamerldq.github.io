(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{144:function(n,e,s){"use strict";s.r(e);var a=s(0),t=Object(a.a)({},(function(){var n=this.$createElement;this._self._c;return this._m(0)}),[function(){var n=this,e=n.$createElement,s=n._self._c||e;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"webpack-搭建vue环境"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-搭建vue环境","aria-hidden":"true"}},[n._v("#")]),n._v(" webpack 搭建vue环境")]),s("h3",{attrs:{id:"package-json"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#package-json","aria-hidden":"true"}},[n._v("#")]),n._v(" package.json")]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('  "devDependencies": {\n    "@babel/cli": "^7.1.0",\n    "@babel/core": "^7.1.0",\n    "@babel/preset-env": "^7.1.0",\n    "@commitlint/cli": "^7.1.2",\n    "@commitlint/config-conventional": "^7.1.2",\n    "autoprefixer": "^9.1.5",\n    "babel-loader": "^8.0.2",\n    "babel-plugin-component": "^1.1.1",\n    "clean-webpack-plugin": "^0.1.19",\n    "copy-webpack-plugin": "^4.5.2",\n    "css-loader": "^1.0.0",\n    "eslint": "^5.6.0",\n    "eslint-config-airbnb-base": "^13.1.0",\n    "eslint-plugin-import": "^2.14.0",\n    "eslint-plugin-vue": "^5.0.0-beta.3",\n    "file-loader": "^2.0.0",\n    "html-webpack-plugin": "^3.2.0",\n    "husky": "^0.14.3",\n    "mini-css-extract-plugin": "^0.4.3",\n    "node-sass": "^4.9.3",\n    "postcss-loader": "^3.0.0",\n    "sass": "^1.13.4",\n    "sass-loader": "^7.1.0",\n    "style-loader": "^0.23.0",\n    "url-loader": "^1.1.1",\n    "vue-loader": "^15.4.2",\n    "vue-template-compiler": "^2.5.17",\n    "webpack": "^4.19.1",\n    "webpack-cli": "^3.1.0",\n    "webpack-dev-server": "^3.1.8",\n    "webpack-merge": "^4.1.4"\n  },\n  "dependencies": {\n    "axios": "^0.18.0",\n    "element-ui": "^2.4.7",\n    "vue": "^2.5.17"\n  }\n')])])]),s("h3",{attrs:{id:"babelrc"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#babelrc","aria-hidden":"true"}},[n._v("#")]),n._v(" .babelrc")]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('{\n  "presets": [\n    ["@babel/preset-env", {\n      "modules": false,\n      "targets": {\n        "browsers": ["> 1%", "last 2 versions", "not ie <= 8"]\n      },\n      "useBuiltIns": "usage" // 为每个文件添加 polyfill\n    }]\n  ],\n  "plugins": [\n    [\n      "component",\n      {\n        "libraryName": "element-ui", // 按需引入element-ui  例如：Vue.use(Button)\n        "styleLibraryName": "theme-chalk" // 引入css  需要在webpack中使用url-loader配置字体和图片的处理\n      }\n    ]\n  ]\n}\n')])])]),s("h3",{attrs:{id:"eslintrc"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#eslintrc","aria-hidden":"true"}},[n._v("#")]),n._v(" .eslintrc")]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('{\n  "extends": [\n    "eslint-config-airbnb-base",\n    "plugin:vue/base"\n  ],\n  "rules": {\n    "no-console": "off",\n    "no-unused-vars": [0],\n    "no-underscore-dangle": [0],\n    "no-param-reassign": [0],\n    "camelcase": [0],\n    "no-useless-constructor": [0],\n    "class-methods-use-this": [0],\n    "import/no-extraneous-dependencies": [0],\n    "react/prop-types": [0],\n    "max-len": [0],\n    "react/no-unescaped-entities": [0],\n    "no-new": [0],\n    "import/no-unresolved": [0]\n  }\n}\n')])])]),s("h3",{attrs:{id:"commitlint-config-js"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#commitlint-config-js","aria-hidden":"true"}},[n._v("#")]),n._v(" commitlint.config.js")]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("module.exports = {\n  extends: ['@commitlint/config-conventional'], // Conventional Commits 规范\n};\n\n")])])]),s("h3",{attrs:{id:"webpack-common-js"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-common-js","aria-hidden":"true"}},[n._v("#")]),n._v(" webpack.common.js")]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("const fs = require('fs');\nconst path = require('path');\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\n\nconst basic_path = path.resolve();\nconst VueLoaderPlugin = require('vue-loader/lib/plugin');\nconst CleanWebpackPlugin = require('clean-webpack-plugin');\nconst autoprefixer = require('autoprefixer');\n// const CopyWebpackPlugin = require('copy-webpack-plugin');\nconst pages = fs.readdirSync(path.resolve(__dirname, 'src/pages')); // 获取所有页面的名称\n\nlet entry = {\n};\n\nconst output = {\n  filename: 'js/[name].bundle.js', // 指定输出文件的名字\n  path: path.join(basic_path, 'build'), // 指定输出文件的地址\n  // publicPath: ''  // 静态资源线上存储路径\n};\n\nconst plugins = [\n  new VueLoaderPlugin(), // 解析Vue文件必须使用的plugin\n  new CleanWebpackPlugin(['build']), // 再每次build的时候清空之前生成的build文件\n  // new CopyWebpackPlugin([   // 图片备用处理方案，不使用dns情况下\n  //   {from:'images',to:'images'} // 将指定的文件夹移动到输出的build文件夹下指定的路径\n  // ]),\n];\npages.forEach((key) => {\n  // 遍历所有的页面，将其添加到entry中\n  entry = Object.assign({}, entry, { [key]: `${basic_path}/src/pages/${key}/index.js` });\n  plugins.push(new HtmlWebpackPlugin({\n    title: `页面${key}`, // 为html提供模板能力 htmlWebpackPlugin.options.title 改变title\n    filename: `html/${key}.html`, // 输出的html文件的名称\n    template: path.join(__dirname, 'src', 'index.html'), // 渲染模板\n    chunks: [key], // 多页面应用中通过chunks区分不同的生成不同的页面\n    inject: true, // 将所有html中相关联的js添加到body的末尾  将css通过link添加到head中\n  }));\n});\nconst common_config = {\n  entry,\n  output,\n  optimization: {\n    splitChunks: { // 拆分vue第三方包为独立的模块\n      cacheGroups: {\n        vendor: {\n          chunks: 'initial',\n          test: /vue/,\n          name: 'vue',\n          enforce: true,\n        },\n      },\n    },\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.(png|jpe?g|gif)$/i,\n        use: [\n          {\n            loader: 'url-loader',\n            options: {\n              limit: 8192, // 图片小于指定大小，会将文件转换成DataURL， 大于则类似file-loader处理\n              name: '[name].[ext]',\n              outputPath: '/images', // 设置成绝对路径， dev => /images   prod => ../images\n              // publicPath: '' //静态资源路径\n            },\n          },\n        ],\n      },\n      {\n        test: /\\.vue$/,\n        loader: 'vue-loader',\n      },\n      {\n        test: /\\.(js)$/,\n        use: [\n          { loader: 'babel-loader' }, // 使用babel对每一个指定的js文件做转换。将所有高版本的语法转换成大多数浏览器支持的语法\n        ],\n        exclude: /node_modules/,\n      },\n      {\n        test: /\\.(ttf|eot|woff|woff2)$/,\n        loader: 'url-loader',\n        options: {\n          limit: 50000,\n          name: '[name].[ext]',\n          outputPath: '/fonts',\n        },\n      },\n      {\n        test: /\\.css$/,\n        use: [\n          { loader: 'style-loader' },\n          {\n            loader: 'css-loader',\n          },\n          {\n            loader: 'postcss-loader',\n            options: {\n              plugins: loader => [\n                autoprefixer(), // 针对各个浏览器对css支持的不同，自动添加前缀\n              ],\n            },\n          },\n        ],\n      },\n\n    ],\n  },\n  resolve: {\n    alias: {\n      vue$: 'vue/dist/vue.esm.js', // 天坑...  不添加这个Vue无法正常获取el\n      images: path.join(__dirname, 'images'),\n      components: path.join(__dirname, 'src', 'components'),\n      services: path.join(__dirname, 'src', 'services'),\n    },\n    extensions: ['.js', '.vue', '.json'],\n  },\n  plugins,\n  devServer: {\n    noInfo: true,\n    stats: 'errors-only',\n  },\n};\n\nmodule.exports = common_config;\n\n")])])]),s("h3",{attrs:{id:"webpack-dev-js"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-dev-js","aria-hidden":"true"}},[n._v("#")]),n._v(" webpack.dev.js")]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("const merge = require('webpack-merge');\nconst common = require('./webpack.common.js');\n\nmodule.exports = merge(common, {\n  mode: 'development',\n  devtool: 'source-map', // 在开发环境中使用source-map，如果代码出现了错误，可以追踪到源码，而不是转译后的代码\n  module: {\n    rules: [\n      {\n        test: /\\.scss$/,\n        use: [\n          { loader: 'style-loader' },\n          {\n            loader: 'css-loader',\n            options: {\n\n              minimize: true,\n\n            },\n          },\n          { loader: 'sass-loader' },\n        ],\n      },\n    ],\n  },\n});\n\n")])])]),s("h3",{attrs:{id:"webpack-prod-js"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webpack-prod-js","aria-hidden":"true"}},[n._v("#")]),n._v(" webpack.prod.js")]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("const merge = require('webpack-merge');\nconst MiniCssExtractPlugin = require('mini-css-extract-plugin');\nconst common = require('./webpack.common.js');\n\nmodule.exports = merge(common, {\n  mode: 'production',\n  module: {\n    rules: [\n      {\n        test: /\\.scss$/,\n        use: [\n          {\n            loader: MiniCssExtractPlugin.loader,\n          },\n          {\n            loader: 'css-loader',\n            options: {\n              minimize: true,\n            },\n          },\n          { loader: 'sass-loader' },\n        ],\n      },\n    ],\n  },\n  plugins: [\n    new MiniCssExtractPlugin({\n      filename: 'css/[name].css',\n\n    }),\n  ],\n});\n\n")])])])])}],!1,null,null,null);e.default=t.exports}}]);